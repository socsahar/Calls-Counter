[build]
  command = "npm install"
  functions = "netlify/functions"
  publish = "public"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/api/entry-codes"
  to = "/.netlify/functions/entry-codes"
  status = 200

[[redirects]]
  from = "/api/entry-codes/*"
  to = "/.netlify/functions/entry-codes/:splat"
  status = 200

[[redirects]]
  from = "/api/auth/validate"
  to = "/.netlify/functions/auth/validate"
  status = 200

[[redirects]]
  from = "/api/auth/*"
  to = "/.netlify/functions/auth/:splat"
  status = 200

[[redirects]]
  from = "/api/calls/historical"
  to = "/.netlify/functions/calls/historical"
  status = 200

[[redirects]]
  from = "/api/calls/*"
  to = "/.netlify/functions/calls/:splat"
  status = 200

[[redirects]]
  from = "/api/calls"
  to = "/.netlify/functions/calls"
  status = 200

[[redirects]]
  from = "/api/vehicle/current"
  to = "/.netlify/functions/vehicle/current"
  status = 200

[[redirects]]
  from = "/api/vehicle/*"
  to = "/.netlify/functions/vehicle/:splat"
  status = 200

[[redirects]]
  from = "/api/stats"
  to = "/.netlify/functions/stats"
  status = 200

[[redirects]]
  from = "/api/stats/*"
  to = "/.netlify/functions/stats/:splat"
  status = 200

[[redirects]]
  from = "/api/codes/alert"
  to = "/.netlify/functions/codes/alert"
  status = 200

[[redirects]]
  from = "/api/codes/medical"
  to = "/.netlify/functions/codes/medical"
  status = 200

[[redirects]]
  from = "/api/codes/*"
  to = "/.netlify/functions/codes/:splat"
  status = 200

[[redirects]]
  from = "/api/admin/dashboard"
  to = "/.netlify/functions/admin/dashboard"
  status = 200

[[redirects]]
  from = "/api/admin/users"
  to = "/.netlify/functions/admin/users"
  status = 200

[[redirects]]
  from = "/api/admin/calls"
  to = "/.netlify/functions/admin/calls"
  status = 200

[[redirects]]
  from = "/api/admin/codes/alert"
  to = "/.netlify/functions/admin/codes/alert"
  status = 200

[[redirects]]
  from = "/api/admin/codes/medical"
  to = "/.netlify/functions/admin/codes/medical"
  status = 200

[[redirects]]
  from = "/api/admin/api-keys"
  to = "/.netlify/functions/admin/api-keys"
  status = 200

[[redirects]]
  from = "/api/admin/*"
  to = "/.netlify/functions/admin/:splat"
  status = 200

[[redirects]]
  from = "/api/settings/*"
  to = "/.netlify/functions/settings/:splat"
  status = 200

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

[[headers]]
  for = "/js/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/css/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
